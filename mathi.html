<!DOCTYPE html>
<html lang="en">

<head>

    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Pameisen</title>
        <link rel="shortcut icon" href="mauchi.png" type="image/x-icon" />
        <link rel="shortcut icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
        <link rel="stylesheet" href="style.css" />
        </script>
    </head>

    <body>
        <a href="#modal" role="button" class="button button__link" id="komptopform-btn">Komplexe Zahl zu Polarform</a>

        <div class="modal-wrapper" id="modal">
            <div class="modal-body card">
                <div class="modal-header">
                    <h2 class="heading">Komplexe Zahl zur Polarform</h2>
                    <a href="#!" role="button" class="close" aria-label="close this modal">
                    </a>
                </div>
                <p id="numtopform">
                    <div>
                        <form>
                            <p>Normalform: x+yi</p>
                            <p>x: <input type="text" id="numtopform-x" placeholder="x"></p>
                            <p>y: <input type="text" id="numtopform-y" placeholder="y"></p>
                            <input type="button" onclick="numtopformCalc()" value="Calculate">
                            <p id="numtopformAns">Antwort</p>

                        </form>
                    </div>

                </p>
            </div>
            <a href="#!" class="outside-trigger"></a>
        </div>

        <script>
            function findGCD(x) {
                function gcd(a, b) {
                    return (b) ? gcd(b, a % b) : a;
                }
                var decimalToFraction = function(_decimal) {
                    if (_decimal == parseInt(_decimal)) {
                        return {
                            top: parseInt(_decimal),
                            bottom: 1,
                            display: parseInt(_decimal) + '/' + 1
                        };
                    } else {
                        var top = _decimal.toString().includes(".") ? _decimal.toString().replace(/\d+[.]/, '') : 0;
                        var bottom = Math.pow(10, top.toString().replace('-', '').length);
                        if (_decimal >= 1) {
                            top = +top + (Math.floor(_decimal) * bottom);
                        } else if (_decimal <= -1) {
                            top = +top + (Math.ceil(_decimal) * bottom);
                        }

                        var x = Math.abs(gcd(top, bottom));
                        return {
                            top: (top / x),
                            bottom: (bottom / x)
                        };
                    }
                };
            }

            function kuerzen33(Zaehler, Nenner)
                {
                
                var Zaehler33 = parseInt(Zaehler);
                var Nenner33 = parseInt(Nenner);

                var Teiler33 = 1;

                if(Zaehler33+""=="NaN")
                    Zaehler33 = 0;
                if(Nenner33+""=="NaN")
                    Nenner33 = 0;

                var ZaehlerG33 = Zaehler33;
                var NennerG33 = Nenner33;

                while(Teiler33<ZaehlerG33&&Teiler33<NennerG33)
                {
                    Teiler33++;

                        if(ZaehlerG33%Teiler33==0&&NennerG33%Teiler33==0)
                        {
                        ZaehlerG33 = ZaehlerG33/Teiler33;
                        NennerG33 = NennerG33/Teiler33;
                        Teiler33 = 1;
                        }
                }
                console.log("Z,N",ZaehlerG33,NennerG33);
                return [ZaehlerG33,NennerG33];
            }

            function numtopformCalc() {
                x = parseFloat(document.getElementById('numtopform-x').value);
                y = parseFloat(document.getElementById('numtopform-y').value);
                if (x == 0 && y == 0) {
                    document.getElementById('numtopformAns').innerHTML = "r=0, ϕ n.d";
                } else if (x == 0 && y > 0) {
                    document.getElementById('numtopformAns').innerHTML = y + "e<sup>i*<sup>π</sup>&frasl;<sub>2</sub></sup>";
                } else if (x == 0 && y < 0) {
                    document.getElementById('numtopformAns').innerHTML = -y + "e<sup>-i*<sup>π</sup>&frasl;<sub>2</sub></sup>";
                } else if (x > 0) {
                    var ata = (Math.round(Math.atan(y / x) * 100) / 100);
                    console.log(ata);
                    ata = ata * 100;
                    if (y>0){
                        document.getElementById('numtopformAns').innerHTML = Math.round(Math.sqrt((Math.pow(x, 2)) + (Math.pow(y, 2))) * 100) / 100 + "e" + "<sup>i*" + kuerzen33((ata/3.14),100)[0] + "&frasl;"+ kuerzen33((ata/3.14),100)[1] +"π</sup>";
                    }
                    else if (y<0){
                        document.getElementById('numtopformAns').innerHTML = Math.round(Math.sqrt((Math.pow(x, 2)) + (Math.pow(y, 2))) * 100) / 100 + "e" + "<sup>-i*" + kuerzen33((-ata/3.14),100)[0] + "&frasl;"+ kuerzen33((-ata/3.14),100)[1] +"π</sup>";
                    }
                    else{
                        document.getElementById('numtopformAns').innerHTML = Math.round(Math.sqrt((Math.pow(x, 2)) + (Math.pow(y, 2))) * 100) / 100 + "e" + "<sup>i*" + "0" +"π</sup>";
                    }

                } else if (x < 0) {
                    var ata = (Math.round(Math.atan(y / x) * 100) / 100);
                    console.log(ata);
                    ata = ata * 100;
                    if (y>0){
                        document.getElementById('numtopformAns').innerHTML = Math.round(Math.sqrt((Math.pow(x, 2)) + (Math.pow(y, 2))) * 100) / 100 + "e" + "<sup>i*" + (parseInt(kuerzen33((-ata/3.14),100)[0])+parseInt(kuerzen33((-ata/3.14),100)[1]/2)) + "&frasl;"+ kuerzen33((-ata/3.14),100)[1] +"π</sup>";
                    }
                    else if (y<0){
                        document.getElementById('numtopformAns').innerHTML = Math.round(Math.sqrt((Math.pow(x, 2)) + (Math.pow(y, 2))) * 100) / 100 + "e" + "<sup>-i*" + (parseInt(kuerzen33((ata/3.14),100)[0])+parseInt(kuerzen33((ata/3.14),100)[1]/2)) + "&frasl;"+ kuerzen33((ata/3.14),100)[1] +"π</sup>";
                    }
                    else{
                        document.getElementById('numtopformAns').innerHTML = Math.round(Math.sqrt((Math.pow(x, 2)) + (Math.pow(y, 2))) * 100) / 100 + "e" + "<sup>i*" +"π</sup>";
                    //document.getElementById('numtopformAns').innerHTML = Math.round(Math.sqrt((Math.pow(x, 2)) + (Math.pow(y, 2))) * 100) / 100 + "e" + "<sup>i*" + ata + "π</sup>&frasl;<sub>100</sub></sup>"
                }
            }
        }
            

        </script>
    </body>

</html>